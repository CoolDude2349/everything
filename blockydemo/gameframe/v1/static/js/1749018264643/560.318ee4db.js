
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="3f456e6e-4959-54b8-b75f-1050c9bc7354")}catch(e){}}();
try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="940d8405-74ca-42b3-b239-7b2f06f4dce1",e._sentryDebugIdIdentifier="sentry-dbid-940d8405-74ca-42b3-b239-7b2f06f4dce1")}catch(e){}{let e="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[(new e.Error).stack]=Object.assign({},e._sentryModuleMetadata[(new e.Error).stack],{"_sentryBundlerPluginAppKey:crazygames-gameframe":!0})}("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:{}).SENTRY_RELEASE={id:"ee3990aa9a03471442036e3e44a5d26d39b55856"};(self.webpackChunk_crazygames_gameframe=self.webpackChunk_crazygames_gameframe||[]).push([[560],{3301:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(12478);const n=class{constructor(e){this.readyMessage=e,this.windowSource=null,this.queuedMessages=[],this.messageListeners=[],this.sendMessage=e=>{this.windowSource?this.windowSource.postMessage(e,"*"):this.queuedMessages.push(e)},this.receiveMessage=async e=>{const t=(0,s.v)();this.messageListeners.push({promise:t,messageType:e});return await t.promise},this.onMessage=e=>{e.data.type===this.readyMessage&&(this.windowSource=e.source,this.queuedMessages.forEach((e=>{var t;return null===(t=this.windowSource)||void 0===t?void 0:t.postMessage(e,"*")}))),this.messageListeners.forEach((t=>{t.messageType===e.data.type&&(e.data.isSuccessful?t.promise.resolve(e.data.result):t.promise.reject(new Error("WindowMessenger:".concat(e.data.type," failed"))))}))},window.addEventListener("message",this.onMessage)}}},37201:(e,t,a)=>{a.d(t,{y:()=>o});var s=a(94950),n=a(52913);const r=window.location.href.includes("localIframeWorker=true");function o(e){const t=(0,n.lZ)(),a=r?"http://localhost:5014/local":"https://".concat(t.gameSlug,".").concat(s.y);switch(e){case"unity2020":return"".concat(a,"/unity/unity2020");case"unity56":return"".concat(a,"/unity/unity56");case"unity54":return"".concat(a,"/unity/unity54")}}},90560:(t,a,s)=>{s.r(a),s.d(a,{default:()=>nt});var n=s(15917),r=s(33899),o=s(12478),i=s(35538),d=s(26068),l=s(31591),u=s(24832),c=s(94082),h=s(69600),m=s(29844),p=s(86372);const g=e=>{let{handleGameData:t,handleEmptyGameData:a=()=>{},handleStateChange:s,handleGetUserGameData:o,forceStop:d=!1,logger:l}=e;const{gameLoadStatus:u}=n.useContext(m.P),{setIsGameDisabled:c}=n.useContext(h.h),{hasUserLoaded:g,userId:f}=n.useContext(r.r),v=n.useRef("initial"),y="NOT_STARTED"!==u,w=n.useCallback(((e,t,a)=>{v.current=e,s(e,a,t)}),[s]);return n.useEffect((()=>{d&&(v.current="aborted")}),[d]),n.useEffect((()=>{const e=async e=>{l.debug("has user: ");try{if((0,p.zP)({type:"load",status:"start"}),i.bm)return;if(i.Yh)return void w("failed");const s=await o();if("aborted"===s.result||"resolvingGameData"!==v.current)return;if(s.gameData){if(e)return c(!0),void w("reload-popup");await t(s.gameData)}else await a();w("resolvedGameData",null,s)}catch(s){w("failed",s)}};if(g)switch(v.current){case"resolvedGameData":case"resolvingGameData":case"failed":break;case"noUser":f&&(w("resolvingGameData"),e(y));break;case"initial":f?(w("resolvingGameData"),e(!1)):w("noUser")}}),[g,f,a,t,y,c,l,w,o]),null};var f=s(54977),v=s(52913),y=s(80035),w=s(72756),S=s(11643),x=s(34769);let D=!1,j=null,A=[];const C=e=>{var t,a;let{type:s,data:n}=e;null===(t=j)||void 0===t||null===(a=t.contentWindow)||void 0===a||a.postMessage({type:s,data:n},"*")},b=(e,t)=>{D?C({type:e,data:t}):A.push({type:e,data:t})},T=async(e,t,a)=>new Promise(((s,n)=>{const r=document.createElement("iframe");r.src=(0,i.bA)((0,v.lZ)().gameSlug,e,t,a),r.style.display="none",r.onload=()=>{D=!0,A.length>0&&(A.forEach(C),A=[]),s()},r.onerror=e=>{n(new y.g("APSInterjector failed to load"))},document.body.appendChild(r),j=r})),E=async e=>{const t=e.metadata.updatedAt.includes("T")?"yyyy-MM-dd'T'HH:mm:ss.SSSX":"yyyy-MM-dd HH:mm:ss",a=(0,x.A)(e.metadata.updatedAt,t,new Date),s=(0,w.A)((0,S.A)(a,-a.getTimezoneOffset()),"T"),n=(0,f.A)((0,f.A)({},e),{},{metadata:(0,f.A)((0,f.A)({},e.metadata),{},{updatedAtTz:s})});return b("requestGameDataResponse",n),new Promise((e=>{const t=a=>{const{type:s}=a.data;"loadGame"===s&&(window.removeEventListener("message",t),e())};window.addEventListener("message",t)}))};var k=s(99660);const I=class{constructor(e){this.onBroadCastDisable=void 0,this.state="inactive",this.broadcastChannel=void 0,this.onBroadcastMessage=e=>{if("inactive"===this.state)return;const{key:t}=e.data;if("joined"===t)this.disableState()},this.disableState=()=>{"disabled"!==this.state&&(this.state="disabled",this.onBroadCastDisable())},this.onBroadCastDisable=e;const t="broadcast_channel_gf_".concat((0,v.lZ)().gameSlug);this.broadcastChannel=new BroadcastChannel(t),this.broadcastChannel.onmessage=this.onBroadcastMessage}sendJoinedMessage(){this.state="enabled";this.broadcastChannel.postMessage({key:"joined",keyData:{}})}};var G=s(87222),R=s(55487),P=s(94353),L=s(24469),M=s(4086);const F=(0,G.Ay)("div")({opacity:.9,backgroundColor:"rgba(0, 0, 0, 0.85)",position:"absolute",left:0,top:0,height:"100vh",width:"100vw",zIndex:1}),U=(0,G.Ay)("div")({backgroundColor:L.l.brand[200],display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",left:0,top:0,height:"100vh",width:"100vw",zIndex:3}),N=(0,G.Ay)("div")((e=>{let{theme:{typography:t}}=e;return{alignItems:"center",alignSelf:"center",backgroundColor:L.l.black[70],borderRadius:20,boxShadow:"0 10px 20px 0 rgba(0, 0, 0, 0.3)",display:"flex",flexDirection:"column",fontFamily:t.fontFamily,justifyContent:"center",padding:32,position:"relative",maxWidth:"100%",width:600}})),O=(0,G.Ay)(R.A)({fill:L.l.brand[60],height:48,width:48}),H=(0,G.Ay)(M.A)({fill:L.l.white[100],height:64,width:64}),z=(0,G.Ay)("div")((e=>{let{theme:{spacing:t}}=e;return{color:L.l.white[100],fontSize:20,fontWeight:700,textAlign:"center",margin:"".concat(t(2)," 0 ").concat(t())}})),q=(0,G.Ay)("div")((e=>{let{theme:t}=e;return{color:L.l.white[60],fontSize:"16px",fontWeight:400,lineHeight:"22px",textAlign:"center",marginBottom:t.spacing(3)}})),_=(0,G.Ay)("span")({color:L.l.brand[60]}),V=(0,G.Ay)("span")({fontWeight:700}),B=(0,G.Ay)(P.O)((e=>{let{theme:t}=e;return{fontFamily:t.typography.fontFamily,fontSize:"16px",fontWeight:800,height:50,width:"100%"}})),Z=(0,G.Ay)("div")({display:"flex",justifyContent:"space-between",gap:"20px",width:"100%"});var K=s(24843),W=s(99268),X=s(90393);const J=n.memo((e=>(0,X.jsxs)(W.A,(0,f.A)((0,f.A)({},e),{},{viewBox:"0 0 70 70",children:[(0,X.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M55.4167 17.5001H14.5833C12.9725 17.5001 11.6667 18.8059 11.6667 20.4167V49.5834C11.6667 51.1942 12.9725 52.5001 14.5833 52.5001H55.4167C57.0275 52.5001 58.3333 51.1942 58.3333 49.5834V20.4167C58.3333 18.8059 57.0275 17.5001 55.4167 17.5001ZM14.5833 11.6667C9.75084 11.6667 5.83333 15.5843 5.83333 20.4167V49.5834C5.83333 54.4159 9.75084 58.3334 14.5833 58.3334H55.4167C60.2492 58.3334 64.1667 54.4159 64.1667 49.5834V20.4167C64.1667 15.5843 60.2492 11.6667 55.4167 11.6667H14.5833Z"}),(0,X.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5 26.2499C17.5 24.6391 18.8058 23.3333 20.4167 23.3333H43.75C45.3608 23.3333 46.6667 24.6391 46.6667 26.2499V29.1666C46.6667 30.7774 45.3608 32.0833 43.75 32.0833H20.4167C18.8058 32.0833 17.5 30.7774 17.5 29.1666V26.2499Z"})]})))),Q=n.memo((e=>(0,X.jsx)(W.A,(0,f.A)((0,f.A)({},e),{},{viewBox:"0 0 30 30",children:(0,X.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.5 8.75C27.5 9.08152 27.3683 9.39946 27.1339 9.63388L22.1339 14.6339C21.6457 15.122 20.8543 15.122 20.3661 14.6339C19.878 14.1457 19.878 13.3543 20.3661 12.8661L23.2322 10L11.25 10C10.5596 10 10 9.44036 10 8.75C10 8.05964 10.5596 7.5 11.25 7.5L23.2322 7.5L20.3661 4.63388C19.878 4.14573 19.878 3.35427 20.3661 2.86612C20.8543 2.37796 21.6457 2.37796 22.1339 2.86612L27.1339 7.86612C27.3683 8.10054 27.5 8.41848 27.5 8.75ZM20 21.25C20 21.9404 19.4404 22.5 18.75 22.5L6.76777 22.5L9.63388 25.3661C10.122 25.8543 10.122 26.6457 9.63388 27.1339C9.14573 27.622 8.35427 27.622 7.86612 27.1339L2.86611 22.1339C2.63169 21.8995 2.5 21.5815 2.5 21.25C2.5 20.9185 2.63169 20.6005 2.86611 20.3661L7.86612 15.3661C8.35427 14.878 9.14573 14.878 9.63388 15.3661C10.122 15.8543 10.122 16.6457 9.63388 17.1339L6.76777 20L18.75 20C19.4404 20 20 20.5596 20 21.25Z"})})))),Y=e=>{let{onReload:t,onHomepage:a}=e;return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(F,{}),(0,X.jsx)(U,{onClick:t,children:(0,X.jsxs)(N,{onClick:e=>{e.stopPropagation(),e.preventDefault()},children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(J,{sx:{width:70,height:70}}),(0,X.jsx)(Q,{sx:{width:30,height:70,mx:1.5}}),(0,X.jsx)(J,{sx:{width:70,height:70}})]}),(0,X.jsx)(z,{children:(0,X.jsx)(K.A,{id:"aps.newTab.title"})}),(0,X.jsx)(q,{children:(0,X.jsx)(K.A,{id:"aps.newTab.text",values:{secondaryButton:(0,X.jsx)(V,{children:(0,X.jsx)(K.A,{id:"aps.newTab.secondaryButton"})})}})}),(0,X.jsxs)(Z,{children:[(0,X.jsx)(B,{onClick:t,variant:"outlined",color:"white",children:(0,X.jsx)(K.A,{id:"aps.newTab.secondaryButton"})}),(0,X.jsx)(B,{onClick:a,variant:"contained",color:"purple",children:(0,X.jsx)(K.A,{id:"aps.newTab.primaryButton"})})]})]})})]})},$=n.createContext({onSaveVersionConflict:()=>{}}),ee=$;var te=s(26578),ae=s(4062);const se=e=>{let{onReload:t,onEnable:a}=e;const[s,r]=n.useState(!1);return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(F,{}),(0,X.jsx)(U,{onClick:t,children:(0,X.jsxs)(N,{onClick:e=>{e.stopPropagation(),e.preventDefault()},children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(J,{sx:{width:70,height:70}}),(0,X.jsx)(Q,{sx:{width:30,height:70,mx:1.5}}),(0,X.jsx)(ae.A,{sx:{width:70,height:70}})]}),(0,X.jsx)(z,{children:(0,X.jsx)(K.A,{id:"aps.versionConflict.title"})}),(0,X.jsx)(q,{children:(0,X.jsx)(K.A,{id:"aps.versionConflict.text"})}),(0,X.jsxs)(Z,{children:[(0,X.jsx)(B,{onClick:()=>{r(!0),a()},variant:"outlined",color:"white",children:s?(0,X.jsx)(te.A,{size:20,style:{color:"white"},disableShrink:!0}):(0,X.jsx)(K.A,{id:"aps.versionConflict.secondaryButton"})}),(0,X.jsx)(B,{onClick:t,variant:"contained",color:"purple",children:(0,X.jsx)(K.A,{id:"aps.versionConflict.primaryButton"})})]})]})})]})};let ne=!1;const re=e=>{let{children:t,onForceSave:a}=e;const[s,r]=n.useState("normal"),{setIsGameDisabled:o}=n.useContext(h.h),{iconsStatus:i}=n.useContext(p.Q3),d=n.useRef(null),l=n.useRef(),u=n.useCallback((e=>{l.current=e,r("error-versionConflict")}),[]);n.useEffect((()=>{if(ne)throw new Error("APSBroadcast is sending joined message twice");ne=!0;d.current=new I((()=>{o(!0),r("error-newTab")})),d.current.sendJoinedMessage()}),[o]);const c=i.status;n.useEffect((()=>{"normal"===s&&"synced-error"===c&&r("error-tooManyErrors")}),[c,s]);const m=()=>{window.location.reload()},g=()=>{k.A.redirectToHomepage()},f=async()=>{await a(l.current),r("normal")};return(0,X.jsx)($.Provider,{value:{onSaveVersionConflict:u},children:"error-newTab"===s?(0,X.jsx)(Y,{onReload:m,onHomepage:g}):"error-versionConflict"===s?(0,X.jsx)(se,{onReload:m,onEnable:f}):"normal"===s?(0,X.jsx)(X.Fragment,{children:t}):null})};var oe=s(36369);class ie extends Error{}class de{constructor(){this.currentExecution=null,this.nextExecution=null}execute(e){return new Promise(((t,a)=>{this.currentExecution?(this.nextExecution&&this.nextExecution.reject(new ie("Execution discarded due to new request")),this.nextExecution={fn:e,resolve:t,reject:a}):this.executeNext(e,t,a)}))}async executeNext(e,t,a){this.currentExecution=e();try{if(t(await this.currentExecution),this.nextExecution){const{fn:e,resolve:t,reject:a}=this.nextExecution;this.nextExecution=null,await this.executeNext(e,t,a)}}catch(s){a(s)}finally{this.currentExecution=null}}}var le=s(98825);class ue{constructor(){this.throttlers={},this.intervalRequestData={},this.isBuffered=!1,this.bufferedPromise=null}static get Instance(){return this._instance||(this._instance=new this)}async executeCommand(e){try{return{status:"ok",result:await this.throttlers[e.key].execute(e.fn)}}catch(t){return{status:"error",error:t}}}async execute(e){if(this.isBuffered){this.bufferedPromise&&this.bufferedPromise.reject({status:"throttled"});const e=(0,o.v)();this.bufferedPromise=e,await e.promise}return this.isBuffered=!0,window.setTimeout((()=>{this.isBuffered=!1,this.bufferedPromise&&this.bufferedPromise.resolve()}),(0,i.nV)()),this.innerThrottledExecute(e)}async innerThrottledExecute(e){this.throttlers[e.key]||(this.throttlers[e.key]=new de);const t=(0,le.A)();let a;this.intervalRequestData[e.key]=t;for(let s=0;s<3;s++){const n=(new Date).getTime(),r=await this.executeCommand(e),o=(new Date).getTime()-n;if("ok"===r.status)return{status:"ok",result:r.result};if(r.error instanceof ie)return{status:"throttled"};if(e.throwOnError&&e.throwOnError(r.error))return{status:"error-throw",error:r.error};const i=1e4-o;if(this.intervalRequestData[e.key]!==t)return{status:"error",error:r.error,attempt:s+1};if(i>0&&await new Promise((e=>setTimeout(e,i))),this.intervalRequestData[e.key]!==t)return{status:"error",error:r.error,attempt:s+1};a=r}return{status:"error",result:a.error,attempt:3}}}ue._instance=void 0;var ce=s(31852);class he{constructor(e,t){this.key=void 0,this.fn=void 0,this.throwOnError=void 0,this.key="saveSdkGameData",this.fn=()=>ce.E.Instance.saveSdkGameData(e,t),this.throwOnError=e=>{var t,a;const s=e instanceof ce.L&&(null===(t=e.result)||void 0===t||null===(a=t.errors)||void 0===a?void 0:a.some((e=>{var t;return(null===e||void 0===e||null===(t=e.extensions)||void 0===t?void 0:t.code)===oe.u1})));return!!s}}}class me{constructor(e,t){this.key=void 0,this.fn=void 0,this.throwOnError=void 0,this.key="replaceGameData",this.fn=()=>ce.E.Instance.replaceGameData(e,t),this.throwOnError=e=>{var t,a;const s=e instanceof ce.L&&(null===(t=e.result)||void 0===t||null===(a=t.errors)||void 0===a?void 0:a.some((e=>{var t;return(null===e||void 0===e||null===(t=e.extensions)||void 0===t?void 0:t.code)===oe.u1})));return!!s}}}class pe{constructor(e){this.key=void 0,this.fn=void 0,this.key="clearGameData",this.fn=()=>ce.E.Instance.clearGameData(e)}}var ge=s(75519);const fe=()=>{const{onSaveVersionConflict:t}=n.useContext(ee);return n.useEffect((()=>{const a=async a=>{try{const{type:e}=a.data;switch(e){case"replaceGameData":{var s,n;const e=await ue.Instance.execute(new me(a.data.data));"error-throw"===e.status&&e.error instanceof ce.L&&(null===(s=e.error.result)||void 0===s||null===(n=s.errors)||void 0===n?void 0:n.some((e=>{var t;return(null===e||void 0===e||null===(t=e.extensions)||void 0===t?void 0:t.code)===oe.u1})))&&t(a.data.data),"error"===e.status&&ge.A.getInstance().sendEvent({type:"apsIssue",issueType:"runtime-save-fail",loaderName:(0,v.lZ)().loader,hasUserLoaded:r.Gd,hasScriptLoaded:!1,jsondata:JSON.stringify({attempt:e.attempt})});break}case"clearGameData":await ue.Instance.execute(new pe(a.data.data))}}catch(e){console.error("message error: ",e)}};return window.addEventListener("message",a),()=>{window.removeEventListener("message",a)}}),[t]),null},ve=e=>{let{onReload:t}=e;return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(F,{style:{zIndex:1001}}),(0,X.jsx)(U,{onClick:t,style:{zIndex:1003},children:(0,X.jsxs)(N,{onClick:e=>{e.stopPropagation(),e.preventDefault()},children:[(0,X.jsx)(O,{}),(0,X.jsx)(z,{children:(0,X.jsx)(K.A,{id:"aps.reload.title"})}),(0,X.jsx)(q,{children:(0,X.jsx)(K.A,{id:"aps.reload.text",values:{highlight:(0,X.jsx)(_,{children:(0,X.jsx)(K.A,{id:"aps.reload.textHighlight"})})}})}),(0,X.jsx)(B,{onClick:t,variant:"contained",children:(0,X.jsx)(K.A,{id:"aps.reload.title"})})]})})]})};var ye=s(41885);const we=e=>{let{children:t}=e;const{adState:a}=n.useContext(ye.L),[s,r]=n.useState(!0);return n.useEffect((()=>{"playing"===a.state?r(!1):r(!0)}),[a]),s?(0,X.jsx)(X.Fragment,{children:t}):null};var Se=s(27591);function xe(e,t,a){return ge.A.getInstance().sendEvent({type:"notificationAction",notificationSource:"userTimeout-popup"===t?"user-load-failed":"game-data-load-failed",action:e},a,a)}const De=e=>{let{onReload:t,onContinue:a,source:s,onShow:r}=e;const o=(0,Se.L7)(),[i,d]=n.useState(!1);return(0,n.useEffect)((()=>{xe("shown",s,!1),r(s)}),[s,r]),(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(F,{}),(0,X.jsx)(U,{children:(0,X.jsxs)(N,{onClick:e=>{e.stopPropagation(),e.preventDefault()},children:[(0,X.jsx)(H,{}),(0,X.jsx)(z,{children:(0,X.jsx)(K.A,{id:"aps.notLoaded.title"})}),(0,X.jsxs)(q,{children:[(0,X.jsx)(K.A,{id:"aps.notLoaded.text"}),o.isIos&&o.isSafari&&(0,X.jsx)(K.A,{id:"aps.notLoaded.textIosSafari"})]}),(0,X.jsxs)(Z,{children:[(0,X.jsx)(B,{onClick:()=>{xe("continue",s,!1),a()},variant:"outlined",color:"white",disabled:i,children:(0,X.jsx)(K.A,{id:"aps.notLoaded.continue"})}),(0,X.jsx)(B,{onClick:async()=>{i||(d(!0),await xe("reload",s,!0),t())},variant:"contained",color:"purple",disabled:i,children:i?(0,X.jsx)(te.A,{disableShrink:!0,style:{color:"white"}}):(0,X.jsx)(K.A,{id:"aps.notLoaded.reload"})})]})]})})]})},je=e=>{let{onStatusChange:t,userStatus:a}=e;const s=n.useRef(),{gameLoadStatus:r}=n.useContext(m.P),o="NOT_STARTED"!==r,i=n.useCallback((()=>{const e=window.setTimeout((()=>{t("userTimeoutTriggered")}),7e3);t("userTimeoutStarted"),s.current={timeout:"userTimeoutStarted",timeoutId:e}}),[t]),d=n.useCallback((()=>{const e=window.setTimeout((()=>{t("gameDataTimeoutTriggered")}),7e3);t("gameDataTimeoutStarted"),s.current={timeout:"gameDataTimeoutStarted",timeoutId:e}}),[t]),l=n.useCallback((()=>{var e;null!==(e=s.current)&&void 0!==e&&e.timeoutId&&window.clearTimeout(s.current.timeoutId)}),[]);return n.useEffect((()=>{if(o)switch(a){case"pending":i();break;case"resolving":l(),d();break;case"none":case"normal":case"failed-unknown":case"reload-popup":l()}}),[a,i,d,l,o]),null},Ae=e=>{let{onDeleteProgressRequest:t}=e;const{setIsGameDisabled:a}=n.useContext(h.h);return n.useEffect((()=>{const e=e=>{e.data&&"deleteProgressRequest"===e.data.type&&(a(!0),t())};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}})),null};var Ce=s(75855);class be extends n.PureComponent{constructor(e){super(e),this.context=void 0,this.logger=(0,l.DV)((0,i.HV)()).withPrefix("[APS-Iframe]"),this.processAPSInterjectorGameDataInitMessage=async e=>{const{type:t}=e.data;"replaceInitGameData"===t&&await ue.Instance.execute(new me(e.data.data))},this.popupShowing=e=>{this.setState({popupCurrentlyShowing:e})},this.startGameOnFailure=()=>{var e;(0,i.FH)(),null===(e=d.A.Instance.getDeferred())||void 0===e||e.resolve(),(0,p.zP)({type:"load",status:"end",success:!1})},this.onFailedContinue=()=>{this.setState({userStatus:"failed-continue"}),this.startGameOnFailure()},this.onSelectReload=()=>{k.A.refreshGamePage()},this.onForceSave=async e=>{await ue.Instance.execute(new me(e,!0))},this.onDeleteProgress=async()=>{const e=t=>{t.data&&"deleteProgressRequestResponse"===t.data.type&&(k.A.deleteProgressRequestResponse(),window.removeEventListener("message",e))};window.addEventListener("message",e),b("deleteProgressRequest")},this.loadApsInterjector=()=>T(this.props.loader),this.handleTimeoutStateChange=e=>{if(!this.state.popupCurrentlyShowing)switch(e){case"userTimeoutTriggered":this.setState({userStatus:"userTimeout-popup"});break;case"gameDataTimeoutStarted":"userTimeout-popup"===this.state.userStatus&&this.setState({userStatus:"pending"});break;case"gameDataTimeoutTriggered":this.setState({userStatus:"gameDataTimeout-popup"})}},this.handleStateChange=(e,t,a)=>{var s;switch(e){case"resolvingGameData":this.logger.debug("resolving game data: "),this.setState({userStatus:"resolving"});break;case"noUser":this.logger.debug("has no user: "),this.setState({userStatus:"none"}),null===(s=d.A.Instance.getDeferred())||void 0===s||s.resolve();break;case"reload-popup":this.setState({userStatus:"reload-popup"});break;case"resolvedGameData":{var n,r;let e;this.setState({userStatus:"normal"}),null===(n=d.A.Instance.getDeferred())||void 0===n||n.resolve();const a=null===t||void 0===t||null===(r=t.gameData)||void 0===r?void 0:r.metadata.updatedAt;if((0,Ce.O)(a)){const t=a.includes("T")?"yyyy-MM-dd'T'HH:mm:ss.SSSX":"yyyy-MM-dd HH:mm:ss",s=(0,x.A)(a,t,new Date);e=(0,S.A)(s,-s.getTimezoneOffset())}(0,p.zP)({type:"load",status:"end",success:!0,lastSaveAt:e});break}case"failed":(0,i.vm)(this.state.userStatus,a),this.setState({userStatus:"failed-unknown"})}},this.handleEmptyGameData=()=>{b("requestGameDataResponse")},this.onPreloadGame=()=>{d.A.Instance.setDeferred((0,o.v)())},this.logger.debug("enabled version ".concat(i.aP)),this.state={userStatus:"pending",popupCurrentlyShowing:void 0}}componentDidMount(){(0,i.Kn)("Loading Iframe loader"),this.onPreloadGame(),window.addEventListener("message",this.processAPSInterjectorGameDataInitMessage),this.loadApsInterjector().catch((e=>{(0,i.vm)(this.state.userStatus,e),this.setState({userStatus:"failed-unknown"})}))}componentWillUnmount(){window.removeEventListener("message",this.processAPSInterjectorGameDataInitMessage)}componentDidUpdate(){this.state.userStatus!==d.A.Instance.getApsUserStatus()&&d.A.Instance.setApsUserStatus(this.state.userStatus)}render(){const{userStatus:e}=this.state,t="NOT_STARTED"!==this.props.gameLoadStatus;return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(g,{handleEmptyGameData:this.handleEmptyGameData,handleGameData:E,handleGetUserGameData:i.Xc,handleStateChange:this.handleStateChange,forceStop:"failed-unknown"===e||"failed-continue"===e,logger:this.logger}),(0,X.jsx)(je,{onStatusChange:this.handleTimeoutStateChange,userStatus:e}),(0,X.jsx)(Ae,{onDeleteProgressRequest:this.onDeleteProgress}),"normal"===e&&t&&(0,X.jsx)(re,{onForceSave:this.onForceSave,children:(0,X.jsx)(fe,{})}),"reload-popup"===e&&(0,X.jsx)(we,{children:(0,X.jsx)(ve,{onReload:this.onSelectReload})}),"userTimeout-popup"===e&&(0,X.jsx)(we,{children:(0,X.jsx)(De,{source:"userTimeout-popup",onReload:this.onSelectReload,onShow:this.popupShowing,onContinue:this.onFailedContinue})}),"gameDataTimeout-popup"===e&&(0,X.jsx)(we,{children:(0,X.jsx)(De,{source:"gameDataTimeout-popup",onReload:this.onSelectReload,onShow:this.popupShowing,onContinue:this.onFailedContinue})}),"failed-unknown"===e&&(0,X.jsx)(we,{children:(0,X.jsx)(De,{source:"gameDataFailure-popup",onReload:this.onSelectReload,onShow:this.popupShowing,onContinue:this.onFailedContinue})})]})}}be.contextType=r.r;const Te=(0,u.p)((0,u.v)((0,c.$9)(be)));var Ee=s(78495),ke=s(78471),Ie=s(43502);const Ge=new(s(3301).A)("unityApsReady");let Re;const Pe=()=>{const{apsSyncTimerMs:e}=(0,v.lZ)();return e||3e4},Le=async(e,t)=>{try{const a=JSON.parse(e.data);await Oe(a),Re=t}catch(a){throw new ke.m("setAPIDataToIDB",a)}},Me=async(e,t,a)=>{if(!e)return null;const{data:s,updatedAtTz:n}=e;if(!s||!(!t||n!==Re))return null;Re=n;const r=Ie.A.getGameTimeInSec();(e=>{const{gameSlug:t}=(0,v.lZ)();Ee.U.Instance.setItem("_czy_".concat(t,"_pt"),"".concat(e))})(r);return await ue.Instance.execute(new me({store:s,version:(0,le.A)(),updatedAtTz:n,playedTime:r},a))},Fe=async(t,a)=>{const s=(0,x.A)(t.metadata.updatedAt,"yyyy-MM-dd HH:mm:ss",new Date),n=parseInt((0,w.A)((0,S.A)(s,-s.getTimezoneOffset()),"T"));let r;try{r=await Ne()}catch(e){null===a||void 0===a||a.debug("Existing data err: ",e)}if(!r)return null===a||void 0===a||a.debug("no local"),void await Le(t,n);if(r===n)return null===a||void 0===a||a.debug("same"),void(Re=r);if(r>n&&r-n<Pe()){null===a||void 0===a||a.debug("choosing LS",r,n);const e=await Ue();await Me(e,!1)}else null===a||void 0===a||a.debug("choosing API"),await Le(t,n)},Ue=async()=>He(),Ne=async()=>ze(),Oe=async e=>qe(e),He=async()=>{Ge.sendMessage({type:"getExistingIndexedData"});return await Ge.receiveMessage("getExistingIndexedDataResult")},ze=async()=>{Ge.sendMessage({type:"getUpdatedAtTz"});return await Ge.receiveMessage("getUpdatedAtTzResult")},qe=async e=>{Ge.sendMessage({type:"installUnityGameData",gameData:e});return await Ge.receiveMessage("installUnityGameDataResult")},_e=async()=>{Ge.sendMessage({type:"deleteProgressRequest"});return await Ge.receiveMessage("deleteProgressRequestResponse")},Ve=()=>{const{onSaveVersionConflict:e}=n.useContext(ee);return n.useEffect((()=>{const t=window.setInterval((async()=>{try{var t,a;const s=await Ue(),n=await Me(s,!0);if(!n)return;"error-throw"===n.status&&n.error instanceof ce.L&&null!==(t=n.error.result)&&void 0!==t&&null!==(a=t.errors)&&void 0!==a&&a.some((e=>{var t;return(null===e||void 0===e||null===(t=e.extensions)||void 0===t?void 0:t.code)===oe.u1}))&&e(s),"error"===n.status&&ge.A.getInstance().sendEvent({type:"apsIssue",issueType:"runtime-save-fail",loaderName:(0,v.lZ)().loader,hasUserLoaded:r.Gd,hasScriptLoaded:!1,jsondata:JSON.stringify({attempt:n.attempt})})}catch(s){console.error("[UPGFConnector] syncUnityData err: ",s)}}),Pe());return()=>{window.clearInterval(t)}}),[e]),n.useEffect((()=>(d.A.Instance.setCachedSyncUnityData((async()=>{var t,a;const s=await Ue(),n=await Me(s,!0);n&&("error-throw"===n.status&&n.error instanceof ce.L&&null!==(t=n.error.result)&&void 0!==t&&null!==(a=t.errors)&&void 0!==a&&a.some((e=>{var t;return(null===e||void 0===e||null===(t=e.extensions)||void 0===t?void 0:t.code)===oe.u1}))&&e(s),"error"===n.status&&ge.A.getInstance().sendEvent({type:"apsIssue",issueType:"runtime-save-fail",loaderName:(0,v.lZ)().loader,hasUserLoaded:r.Gd,hasScriptLoaded:!1,jsondata:JSON.stringify({attempt:n.attempt})}))})),()=>{d.A.Instance.setCachedSyncUnityData(null)})),[e]),null},Be=t=>{let{logger:a}=t;const{onSaveVersionConflict:s}=n.useContext(ee);return n.useEffect((()=>{const t=async t=>{try{const{type:e}=t.data;if("syncUnityGameData"===e)a.debug("syncUnityGameData requested"),(async()=>{var e,t;const a=await Ue(),n=await Me(a,!0);n&&"error-throw"===n.status&&n.error instanceof ce.L&&null!==(e=n.error.result)&&void 0!==e&&null!==(t=e.errors)&&void 0!==t&&t.some((e=>{var t;return(null===e||void 0===e||null===(t=e.extensions)||void 0===t?void 0:t.code)===oe.u1}))&&s(a)})()}catch(e){a.err(new Error("message err: "),e)}};return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}}),[a,s]),null},Ze=e=>{let{logger:t}=e;return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Ve,{}),(0,X.jsx)(Be,{logger:t})]})};var Ke=s(37201),We=s(17222);class Xe extends n.PureComponent{constructor(e){super(e),this.context=void 0,this.logger=(0,l.DV)((0,i.HV)()).withPrefix("[APS-Unity]"),this.popupShowing=e=>{this.setState({popupCurrentlyShowing:e})},this.onDeleteProgressRequest=async()=>{await(async()=>_e())(),k.A.deleteProgressRequestResponse()},this.startGameOnFailure=()=>{var e;(0,i.FH)(),null===(e=d.A.Instance.getDeferred())||void 0===e||e.resolve(),(0,p.zP)({type:"load",status:"end",success:!1})},this.onFailedContinue=()=>{this.setState({userStatus:"failed-continue"}),this.startGameOnFailure()},this.handleTimeoutStateChange=e=>{if(!this.state.popupCurrentlyShowing)switch(e){case"userTimeoutTriggered":this.setState({userStatus:"userTimeout-popup"});break;case"gameDataTimeoutStarted":"userTimeout-popup"===this.state.userStatus&&this.setState({userStatus:"pending"});break;case"gameDataTimeoutTriggered":this.setState({userStatus:"gameDataTimeout-popup"})}},this.onSelectReload=()=>{k.A.refreshGamePage()},this.onForceSave=async e=>{await Me(e,!1,!0)},this.handleStateChange=(e,t,a)=>{var s;switch(e){case"resolvingGameData":this.logger.debug("resolving game data: "),this.setState({userStatus:"resolving"});break;case"noUser":this.setState({userStatus:"none"}),this.logger.debug("has no user: "),null===(s=d.A.Instance.getDeferred())||void 0===s||s.resolve();break;case"reload-popup":this.setState({userStatus:"reload-popup"});break;case"resolvedGameData":{var n,r;let e;null===(n=d.A.Instance.getDeferred())||void 0===n||n.resolve(),this.setState({userStatus:"normal"});const a=null===t||void 0===t||null===(r=t.gameData)||void 0===r?void 0:r.metadata.updatedAt;if((0,Ce.O)(a)){const t=a.includes("T")?"yyyy-MM-dd'T'HH:mm:ss.SSSX":"yyyy-MM-dd HH:mm:ss",s=(0,x.A)(a,t,new Date);e=(0,S.A)(s,-s.getTimezoneOffset())}(0,p.zP)({type:"load",status:"end",success:!0,lastSaveAt:e});break}case"failed":(0,i.vm)(this.state.userStatus,a),this.setState({userStatus:"failed-unknown"})}},this.handleEmptyGameData=async()=>{const e=await Ue();await Me(e,!1)},this.onPreloadGame=()=>{d.A.Instance.setDeferred((0,o.v)())},this.loadApsInterjector=()=>{const e=(0,We.z)(),t=(0,v.lZ)().loaderOptions,a=t.unitySaveFileNames?t.unitySaveFileNames[0]:void 0;if("unity56"===e)return T("unity",(0,Ke.y)("unity56"),a);if("unity2020"===e)return T("unity",(0,Ke.y)("unity2020"),a);throw new Error("Not supported unity version")},this.logger.debug("enabled"),this.state={userStatus:"pending",popupCurrentlyShowing:void 0}}componentDidMount(){(0,i.Kn)("Loading Unity loader"),this.onPreloadGame(),this.loadApsInterjector().catch((e=>{(0,i.vm)(this.state.userStatus,e),this.setState({userStatus:"failed-unknown"})}))}componentDidUpdate(){this.state.userStatus!==d.A.Instance.getApsUserStatus()&&d.A.Instance.setApsUserStatus(this.state.userStatus)}render(){const{userStatus:e}=this.state,t="NOT_STARTED"!==this.props.gameLoadStatus;return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(g,{handleEmptyGameData:this.handleEmptyGameData,handleGameData:Fe,handleGetUserGameData:i.Xc,handleStateChange:this.handleStateChange,forceStop:"failed-unknown"===e||"failed-continue"===e,logger:this.logger}),(0,X.jsx)(je,{onStatusChange:this.handleTimeoutStateChange,userStatus:e}),(0,X.jsx)(Ae,{onDeleteProgressRequest:this.onDeleteProgressRequest}),"normal"===e&&t&&(0,X.jsx)(re,{onForceSave:this.onForceSave,children:(0,X.jsx)(Ze,{logger:this.logger})}),"reload-popup"===e&&(0,X.jsx)(we,{children:(0,X.jsx)(ve,{onReload:this.onSelectReload})}),"userTimeout-popup"===e&&(0,X.jsx)(we,{children:(0,X.jsx)(De,{source:"userTimeout-popup",onReload:this.onSelectReload,onShow:this.popupShowing,onContinue:this.onFailedContinue})}),"gameDataTimeout-popup"===e&&(0,X.jsx)(we,{children:(0,X.jsx)(De,{source:"gameDataTimeout-popup",onReload:this.onSelectReload,onShow:this.popupShowing,onContinue:this.onFailedContinue})}),"failed-unknown"===e&&(0,X.jsx)(we,{children:(0,X.jsx)(De,{source:"gameDataFailure-popup",onReload:this.onSelectReload,onShow:this.popupShowing,onContinue:this.onFailedContinue})})]})}}Xe.contextType=r.r;const Je=(0,u.p)((0,u.v)((0,c.$9)(Xe))),Qe=()=>{const{onSaveVersionConflict:e}=n.useContext(ee);return n.useEffect((()=>{const t=t=>{var a;try{const{type:s}=t.data;if("saveSdkGameData"===s)(async t=>{var a,s,n,o;let i;try{i=await ue.Instance.execute(new he(t))}catch(d){return void console.debug("throttled reject SDK save")}switch(i.status){case"ok":case"throttled":break;case"error-throw":case"error":i.error instanceof ce.L&&null!==(a=i.error.result)&&void 0!==a&&null!==(s=a.errors)&&void 0!==s&&s.some((e=>{var t;return(null===e||void 0===e||null===(t=e.extensions)||void 0===t?void 0:t.code)===oe.u1}))&&e(t),"error"===i.status&&ge.A.getInstance().sendEvent({type:"apsIssue",issueType:"runtime-save-fail",loaderName:(0,v.lZ)().loader,hasUserLoaded:r.Gd,hasScriptLoaded:!1,jsondata:JSON.stringify({attempt:i.attempt})}),k.A.sendSDKError({errorName:"gf-save-fail",module:"data",specificValues:{error:i.error,message:null===(n=i.error)||void 0===n?void 0:n.message,name:null===(o=i.error)||void 0===o?void 0:o.name}})}})(null===(a=t.data)||void 0===a?void 0:a.data)}catch(s){console.error(s)}};return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}}),[e]),null},Ye=e=>{let{onError:t,loader:a,unityRawIDBId:s,customSaveFileName:r}=e;return n.useEffect((()=>{T(a,s,r).catch((e=>{t(e)}))}),[]),null};var $e=s(26477),et=s(24703);const tt=(0,l.DV)((0,i.HV)()).withPrefix("[APS-SDKPS]");function at(){const e=(0,v.lZ)().loader;return v.V7.includes(e)&&(0,i.m0)()?"iframe":"ruffle"===e&&(0,i.qX)()?"ruffle":v.el.includes(e)&&(0,i.jl)()?"unity":null}const st=()=>{const{gameLoadStatus:e}=n.useContext(m.P),[t,a]=n.useState(!1),[s,r]=n.useState("pending"),[u,c]=n.useState(),h=n.useRef({status:"loading"}),f=n.useRef([]),y=n.useRef(),w="NOT_STARTED"!==e;d.A.Instance.getDeferred()||d.A.Instance.setDeferred((0,o.v)()),n.useEffect((()=>{d.A.Instance.setApsUserStatus(s)}),[s]),n.useEffect((()=>{const e=e=>{try{const{type:t}=e.data;if("requestSdkGameDataNew"===t)f.current.push(e.source),A()}catch(t){tt.error("Failed to handle requestSdkGameDataNew",t)}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[]);const S=e=>{var t,a;switch(e){case"resolvedGameData":case"noUser":null===(t=y.current)||void 0===t||t.resolve();break;case"failed":null===(a=y.current)||void 0===a||a.reject(new Error("apsLoad-failed"))}},x=n.useCallback((()=>{var e;null===(e=y.current)||void 0===e||e.reject(new Error("apsLoad-failed"))}),[]);const D=()=>{const e=(0,We.z)();if("unity56"===e)return(0,Ke.y)("unity56");if("unity2020"===e)return(0,Ke.y)("unity2020");throw new Error("Not supported unity version")},j=()=>{k.A.refreshGamePage()},A=()=>{h.current&&0!==f.current.length&&(f.current.forEach((e=>{"loaded"!==h.current.status&&"failed"!==h.current.status||(e.postMessage({type:"sdkGameDataResponseNew",data:h.current},"*"),tt.debug("Sending game data to SDK",h.current))})),f.current=[])},C=e=>e instanceof Error&&"forceApsGameDataFail"===e.message?(k.A.sendSDKError({errorName:"gf-preload-url-fail",module:"data",specificValues:{error:e,message:e.message,name:e.name}}),void tt.error("Failed to load SDKPS data URL",e)):e instanceof $e.M?(k.A.sendSDKError({errorName:"gf-preload-url-fail",module:"data",specificValues:{error:e,message:e.message,name:e.name,timeoutMs:i.Nl}}),void tt.error("Failed to load SDKPS data URL",e)):e instanceof ce.L?(k.A.sendSDKError({errorName:"gf-preload-url-fail",module:"data",specificValues:{error:e,message:e.message,name:e.name}}),void tt.error("Failed to load SDKPS data URL",e)):void(e instanceof Error&&("fetch-fail"===e.message||"TimeoutError"===e.name)&&(k.A.sendSDKError({errorName:"gf-preload-data-fail",module:"data",specificValues:{error:e,message:e.message,name:e.name,timeoutMs:"TimeoutError"===e.name?i.Nl:void 0}}),tt.error("Failed to load SDKPS data JSON",e))),b=n.useCallback((e=>{if(!u)switch(e){case"userTimeoutTriggered":r("userTimeout-popup");break;case"gameDataTimeoutStarted":"userTimeout-popup"===s&&r("pending");break;case"gameDataTimeoutTriggered":r("gameDataTimeout-popup")}}),[s,u]),T=n.useCallback((e=>{c(e)}),[]),I=()=>{r("failed-continue"),(()=>{var e;h.current.status="failed",A(),null===(e=d.A.Instance.getDeferred())||void 0===e||e.resolve(),(0,p.zP)({type:"load",status:"end",success:!1})})()};return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(je,{onStatusChange:b,userStatus:s}),(0,X.jsx)(g,{handleGetUserGameData:i.aA,handleEmptyGameData:async()=>{at()&&(a(!0),y.current=(0,o.v)(),await y.current.promise),h.current={hasData:!1,status:"loaded"},A()},handleGameData:async e=>{h.current={data:e.data,hasData:!0,status:"loaded"},A()},handleStateChange:(e,t,a)=>{var s;switch(e){case"resolvingGameData":l.vF.debug("resolving game data: "),r("resolving");break;case"noUser":l.vF.debug("has no user: "),r("none"),null===(s=d.A.Instance.getDeferred())||void 0===s||s.resolve();break;case"reload-popup":r("reload-popup");break;case"resolvedGameData":{var n,o;let e;if(l.vF.debug("game data resolved: "),r("normal"),null===(n=d.A.Instance.getDeferred())||void 0===n||n.resolve(),null!==t&&void 0!==t&&null!==(o=t.gameData)&&void 0!==o&&o.metadata.updatedAt&&0!==Object.keys((null===t||void 0===t?void 0:t.gameData).data).length){var i;e=(0,et.A)(null===t||void 0===t||null===(i=t.gameData)||void 0===i?void 0:i.metadata.updatedAt)}(0,p.zP)({type:"load",status:"end",success:!0,lastSaveAt:e});break}case"failed":C(a),r("failed-unknown")}},forceStop:"failed-unknown"===s||"failed-continue"===s,logger:l.vF}),(0,X.jsx)(Ae,{onDeleteProgressRequest:async()=>{await new he({jsonData:"{}"},!0).fn(),k.A.deleteProgressRequestResponse()}}),t&&function(){switch(at()){case"iframe":return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(g,{handleGetUserGameData:i.Xc,handleGameData:E,handleStateChange:S,logger:l.vF}),(0,X.jsx)(Ye,{onError:x,loader:"iframe"})]});case"ruffle":return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(g,{handleGetUserGameData:i.Xc,handleGameData:E,handleStateChange:S,logger:l.vF}),(0,X.jsx)(Ye,{onError:x,loader:"ruffle"})]});case"unity":{const e=D(),t=(0,v.lZ)().loaderOptions,a=t.unitySaveFileNames?t.unitySaveFileNames[0]:void 0;return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(g,{handleGetUserGameData:i.Xc,handleGameData:Fe,handleStateChange:S,logger:l.vF}),(0,X.jsx)(Ye,{onError:x,loader:"unity",unityRawIDBId:e,customSaveFileName:a})]})}default:return null}}(),"normal"===s&&w&&(0,X.jsx)(re,{onForceSave:async e=>{await ue.Instance.execute(new he(e,!0))},children:(0,X.jsx)(Qe,{})}),"reload-popup"===s&&(0,X.jsx)(we,{children:(0,X.jsx)(ve,{onReload:j})}),"userTimeout-popup"===s&&(0,X.jsx)(we,{children:(0,X.jsx)(De,{source:"userTimeout-popup",onReload:j,onShow:T,onContinue:I})}),"gameDataTimeout-popup"===s&&(0,X.jsx)(we,{children:(0,X.jsx)(De,{source:"gameDataTimeout-popup",onReload:j,onShow:T,onContinue:I})}),"failed-unknown"===s&&(0,X.jsx)(we,{children:(0,X.jsx)(De,{source:"gameDataFailure-popup",onReload:j,onShow:T,onContinue:I})})]})},nt=()=>{const{progressSyncHandler:e}=n.useContext(p.Q3);switch(e){case"none":return null;case"sdkps":return(0,X.jsx)(st,{});case"aps-iframe":return(0,X.jsx)(Te,{loader:"iframe"});case"aps-ruffle":return(0,X.jsx)(Te,{loader:"ruffle"});case"aps-unity":return(0,X.jsx)(Je,{});default:throw new Error("Unhandled APS handler ".concat(e))}}}}]);
//# debugId=3f456e6e-4959-54b8-b75f-1050c9bc7354
